<%- await include('../components/head.ejs', {title: "Produtos adquiridos" }) %>

<div class="d-flex flex-column min-vh-100 w-100">
  <%- await include('../components/header.ejs') %>

  <main
    class="container w-75 d-flex flex-column align-items-start mt-3 pt-4 flex-grow-1 mb-5"
  >
    <h1 class="mb-5">Produtos adquiridos</h1>

    <% if (products.length == 0) { %>
      <div class="alert alert-info w-100 mt-4 p-1" role="alert">
        Nenhum produto adquirido.
      </div>
    <% } %>

    <% for( let i=0; i < products.length; i++ ) { %>
      <div class="card mt-1 mb-2 w-100">
        <div class="row g-0">
          <div
            class="col col-lg-2 d-flex align-items-center border-end justify-content-center"
          >
            <img
              src="<%= products[i].image_path %>"
              class="img-fluid rounded-start p-1"
              alt="<%= products[i].name %>"
              style="width: 200px"
            />
          </div>

          <div class="col d-flex justify-content-between">
            <div class="card-body d-flex flex-column justify-content-between">
              <h5 class="card-title"><%= products[i].name %></h5>
              <small class="card-text text-muted">
                  <%= products[i].description.substring(0, 300) %>
              </small>
              <small class="card-text text-muted">
                <%= products[i].description.length > 300 ? '...' : '' %>
              </small>

              <div class="card-text d-flex justify-content-start gap-5 mt-3">
                <p>
                  <strong>Categoria:</strong>
                  <%= products[i].category_name %>
                </p>
                <p>
                  <strong>Jogo:</strong>
                  <%= products[i].game_name %>
                </p>

                <p>
                  <strong>Pre√ßo:</strong>
                  R$ <%= products[i].price %>
                </p>
                <p>
                  <strong>Quantidade:</strong>
                  <%= products[i].stock %>
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>

    <% } %>
  </main>

  <%- await include('../components/footer.ejs') %>
</div>
